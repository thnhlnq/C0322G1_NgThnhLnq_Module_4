<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Blog</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>
<body>

<label><input type="search" id="nameFind" autocomplete="off"></label>

<table class="table table-striped table-hover">
    <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Content</th>
        <th>Day Create</th>
        <th>Category</th>
    </tr>
</table>

<button id="more">See More</button>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script>
    $(document).ready(function () {
        $.ajax({
            url: "http://localhost:8080/blog/api/v1",
            type: "GET",
            dataType: "json",
            success: function (data) {
                // console.log(data);
                let tr = [];
                // let load = data.length <= 5 ? data.length : data.length += 5;
                for (let i = 0; i < data.length; i++) {
                    tr.push("<tr>");
                    tr.push("<td>" + data[i].id + "</td>");
                    tr.push("<td>" + data[i].name + "</td>");
                    tr.push("<td>" + data[i].content + "</td>");
                    tr.push("<td>" + data[i].dayCreate + "</td>");
                    tr.push("<td>" + data[i].category.name + "</td>");
                    tr.push("</tr>");
                }
                $("table").append((tr.join("")));
            }
        })

        $("#nameFind").keyup(function () {
            let value = $(this).val();
            // console.log(value);
            $("table").empty();
            $.ajax({
                url: "http://localhost:8080/blog/api/v1/search?nameFind=" + value,
                type: "GET",
                dataType: "json",
                success: function (data) {
                    console.log(data);
                    let tr = [];
                    tr.push("<tr>");
                    tr.push("<th>" + "Id" + "</th>");
                    tr.push("<th>" + "Name" + "</th>");
                    tr.push("<th>" + "Content" + "</th>");
                    tr.push("<th>" + "Day Create" + "</th>");
                    tr.push("<th>" + "Category" + "</th>");
                    tr.push("</tr>");
                    for (let i = 0; i < data.length; i++) {
                        tr.push("<tr>");
                        tr.push("<td>" + data[i].id + "</td>");
                        tr.push("<td>" + data[i].name + "</td>");
                        tr.push("<td>" + data[i].content + "</td>");
                        tr.push("<td>" + data[i].dayCreate + "</td>");
                        tr.push("<td>" + data[i].category.name + "</td>");
                        tr.push("</tr>");
                    }
                    $("table").append(tr.join(""));
                }
            })
        })
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
</body>
</html>